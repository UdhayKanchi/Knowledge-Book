<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Portal Access</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* ðŸŒŸ Hover glow effect on inputs */
input:hover {
  box-shadow: 0 0 8px rgba(0, 198, 255, 0.6);
  transition: box-shadow 0.3s ease;
}

/* ðŸŒŸ Ripple effect on buttons */
.login-btn:active,
.register-btn:active {
  transform: scale(0.98);
  box-shadow: 0 0 12px rgba(0, 198, 255, 0.6);
  transition: transform 0.1s ease, box-shadow 0.2s ease;
}

/* ðŸŒŸ Bounce effect on icons */
.background-icons img:hover {
  animation: bounce 0.6s ease;
}

@keyframes bounce {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}

/* ðŸŒŸ Scale-up effect on login box hover */
.login-box:hover {
  transform: scale(1.02);
  transition: transform 0.3s ease;
}

/* General resets */
* {
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

body {
  margin: 0;
  padding: 0;
  height: 100vh;
  background: radial-gradient(circle at center, #1e3c72, #2a5298);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  position: relative;
}

/* Background floating icons */
.background-icons {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
}

.background-icons img {
  position: absolute;
  width: 80px;
  opacity: 0.08;
  animation: float 16s infinite ease-in-out;
}

@keyframes float {
  0%   { transform: translateY(0) rotate(0deg); }
  50%  { transform: translateY(-60px) rotate(180deg); }
  100% { transform: translateY(0) rotate(360deg); }
}

/* Login/Register box */
.login-box {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 40px;
  width: 100%;
  max-width: 420px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
  z-index: 1;
  animation: fadeIn 1.2s ease forwards;
  opacity: 0;
  transform: translateY(30px);
}

@keyframes fadeIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Headings */
h2 {
  text-align: center;
  color: #fff;
  margin-bottom: 30px;
}

/* Form fields */
.form-group {
  margin-bottom: 20px;
  position: relative;
}

label {
  color: #eee;
  display: block;
  margin-bottom: 8px;
}

input {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  background-color: rgba(255, 255, 255, 0.2);
  color: #fff;
}

input::placeholder {
  color: #ccc;
}

/* Show/Hide password toggle */
.toggle-password {
  position: absolute;
  right: 12px;
  top: 38px;
  cursor: pointer;
  font-size: 14px;
  color: #ccc;
}

/* Buttons */
.login-btn,
.register-btn {
  width: 100%;
  padding: 12px;
  background-color: #00c6ff;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  cursor: pointer;
  margin-top: 10px;
  transition: background-color 0.3s ease;
}

.login-btn:hover,
.register-btn:hover {
  background-color: #0072ff;
}

/* Error messages */
.error-message {
  color: #ff4d4d;
  font-size: 14px;
  margin-top: 10px;
  display: none;
}

  </style>
</head>
<body>
  <div class="background-icons">
    <img src="https://img.icons8.com/ios-filled/100/ffffff/book.png" style="top: 10%; left: 15%;" />
    <img src="https://img.icons8.com/ios-filled/100/ffffff/graduation-cap.png" style="top: 40%; left: 70%;" />
    <img src="https://img.icons8.com/ios-filled/100/ffffff/open-book.png" style="top: 75%; left: 30%;" />
    <img src="https://img.icons8.com/ios-filled/100/ffffff/classroom.png" style="top: 20%; left: 85%;" />
  </div>

  <div class="login-box">
    <h2>Access Study Portal</h2>
    <form id="accessForm">
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" placeholder="Your full name" />
      </div>
      <div class="form-group">
        <label for="username">Email or Username</label>
        <input type="text" id="username" name="username" placeholder="Enter your email" required />
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="Enter your password" required />
        <span class="toggle-password" onclick="togglePassword()">Show</span>
      </div>
      <button type="submit" class="login-btn">Login</button>
      <button type="button" class="register-btn" onclick="registerUser()">Register</button>
      <div class="error-message" id="errorMsg"></div>
    </form>
  </div>

  <script>
    const API_BASE = ""; // empty if frontend served by backend. If separate, set to "https://your-app.onrender.com"

    function togglePassword() {
      const passwordInput = document.getElementById("password");
      const toggle = document.querySelector(".toggle-password");
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        toggle.textContent = "Hide";
      } else {
        passwordInput.type = "password";
        toggle.textContent = "Show";
      }
    }

    document.getElementById("accessForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      try {
        const res = await fetch(`${API_BASE}/login`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password })
        });

        const data = await res.json();
        if (res.ok) {
          window.location.href = "home.html"; 
        } else {
          document.getElementById("errorMsg").style.display = "block";
          document.getElementById("errorMsg").innerText = data.message || "Login failed";
        }
      } catch (err) {
        document.getElementById("errorMsg").style.display = "block";
        document.getElementById("errorMsg").innerText = "Server error";
      }
    });

    async function registerUser() {
      const name = document.getElementById("name").value;
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      try {
        const res = await fetch(`${API_BASE}/register`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, username, password })
        });

        const data = await res.json();
        if (res.ok) {
          alert("Registration successful! You can now login.");
        } else {
          alert(data.message || "Registration failed");
        }
      } catch (err) {
        alert("Server error during registration.");
      }
    }
  </script>
</body>
</html>
